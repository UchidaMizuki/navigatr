---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# navigatr

<!-- badges: start -->
[![CRAN status](https://www.r-pkg.org/badges/version/navigatr)](https://CRAN.R-project.org/package=navigatr)
<!-- badges: end -->

navigatr provides a navigation menu to enable pipe-friendly data processing for hierarchical data structures.
By activating the menu items, you can perform operations on each item while maintaining the overall structure in attributes.

Only three functions, `new_menu()`, `activate()` and `rekey()`, are the core functions of this package.
Their roles are as follows,

- `new_menu()` builds a new navigation menu.
- `activate()` accesses a menu item.
- `rekey()` renames the key of a menu item.

## Installation

You can install navigatr from CRAN.

``` r
install.packages("navigatr")
```

You can also install the development version from GitHub.

``` r
# install.packages("devtools")
devtools::install_github("UchidaMizuki/navigatr")
```

## Examples

```{r,message=FALSE}
library(navigatr)
library(dplyr)
```

To build a new navigation menu, give `new_menu()` unique keys and a list of their corresponding values.
The upper rows show the menu items (keys on the left, value summaries on the right).
By defining `pillar::obj_sum`, you can change the way the summaries are displayed.

```{r}
band <- new_menu(key = c("band_members", "band_instruments"),
                 value = list(band_members, band_instruments))
band
```

You can activate a menu item by `activate()`.
Activating a menu item allows you to perform operations on the active item.
`activate()` turns a `navigatr_menu` object into an `navigatr_item` object, and `deactivate()` turns it back.

```{r}
band <- band %>%
  activate(band_members) %>%
  filter(band == "Beatles")
band
```

```{r}
band <- band %>% 
  deactivate()
band
```

The rekey() function is used to change the key of an activated menu item.

```{r}
band %>% 
  activate(band_instruments) %>% 
  rekey("new_band_instruments")
```

You can also build a nested navigation menu.
To activate the items, specify multiple variables.

```{r}
bands <- new_menu(key = c("key1", "key2"),
                  value = list(band, band)) # A list of menu objects
bands %>% 
  activate(key1, band_instruments) %>% 
  select(name)
```
